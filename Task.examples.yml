version: '3'

tasks:
  basic:
    desc: Run basic example workflow
    cmds:
      - |
        . {{.VENV_DIR}}/bin/activate
        python examples/basic_workflow.py

  n8n:
    desc: Run n8n-style nodes example
    cmds:
      - |
        . {{.VENV_DIR}}/bin/activate
        python examples/n8n_style_nodes.py

  api:
    desc: Run API workflow example
    cmds:
      - |
        . {{.VENV_DIR}}/bin/activate
        python examples/api_workflow.py

  subworkflow:
    desc: Run sub-workflow example
    cmds:
      - |
        . {{.VENV_DIR}}/bin/activate
        python examples/subworkflow_example.py

  extended:
    desc: Run extended nodes demo (Shell, File, Data, Timing, Notifications)
    cmds:
      - |
        . {{.VENV_DIR}}/bin/activate
        python examples/extended_nodes_demo.py

  data-formats:
    desc: Run data formats demo (CSV/Excel operations)
    cmds:
      - |
        . {{.VENV_DIR}}/bin/activate
        PYTHONPATH=. python examples/data_formats_demo.py

  runner:
    desc: Run resource-optimized WorkflowRunner example
    cmds:
      - |
        . {{.VENV_DIR}}/bin/activate
        PYTHONPATH=. python examples/resource_optimized_runner.py

  queue:
    desc: Run queue provider selection example (memory/redis)
    cmds:
      - |
        . {{.VENV_DIR}}/bin/activate
        PYTHONPATH=. python examples/queue_provider_example.py

  redis-store:
    desc: Run RedisStateStore example (falls back to JSON if Redis unavailable)
    cmds:
      - |
        . {{.VENV_DIR}}/bin/activate
        PYTHONPATH=. python examples/redis_state_store_example.py

  resilience:
    desc: Run resilience nodes example (retry/circuit_breaker/foreach)
    cmds:
      - |
        . {{.VENV_DIR}}/bin/activate
        PYTHONPATH=. python examples/resilience_nodes_example.py

  all:
    desc: Run all examples
    cmds:
      - |
        . {{.VENV_DIR}}/bin/activate
        printf '%s\n' "ðŸ”„ Running basic workflow example..."
        python examples/basic_workflow.py
        printf '\n\n%s\n' "ðŸ”„ Running n8n-style nodes example..."
        python examples/n8n_style_nodes.py
        printf '\n\n%s\n' "ðŸ”„ Running API workflow example..."
        python examples/api_workflow.py
        printf '\n\n%s\n' "ðŸ”„ Running sub-workflow example..."
        python examples/subworkflow_example.py
        printf '\n\n%s\n' "ðŸ”„ Running extended nodes demo..."
        python examples/extended_nodes_demo.py
        printf '\n\n%s\n' "ðŸ”„ Running data formats demo..."
        PYTHONPATH=. python examples/data_formats_demo.py
        printf '\n\n%s\n' "ðŸ”„ Running resource-optimized runner demo..."
        PYTHONPATH=. python examples/resource_optimized_runner.py
        printf '\n\n%s\n' "ðŸ”„ Running queue provider demo..."
        PYTHONPATH=. python examples/queue_provider_example.py
        printf '\n\n%s\n' "ðŸ”„ Running Redis state store demo..."
        PYTHONPATH=. python examples/redis_state_store_example.py
        printf '\n\n%s\n' "ðŸ”„ Running resilience nodes demo..."
        PYTHONPATH=. python examples/resilience_nodes_example.py
        printf '\n\n%s\n' "âœ… All examples completed!"
